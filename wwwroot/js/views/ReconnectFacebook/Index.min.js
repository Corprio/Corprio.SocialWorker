!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.vjs=t():e.vjs=t()}(self,(()=>(()=>{"use strict";var e={28:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WEBHOOKS=t.PERMISSIONS=void 0,t.PERMISSIONS=["email","public_profile","business_management","pages_show_list","pages_manage_metadata","pages_messaging","pages_manage_posts","instagram_basic","instagram_content_publish","instagram_manage_messages"],t.WEBHOOKS=["messages"]}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}var o={};return(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0});const t=n(28);var a,s,i,c,r;function l(){FB.getLoginStatus((function(e){u(e)}))}function u(e){var t,n;if("connected"===(null==e?void 0:e.status))$("#loginBtn").hide(),$("#logoutBtn").show(),d(null===(t=e.authResponse)||void 0===t?void 0:t.userID,null===(n=e.authResponse)||void 0===n?void 0:n.accessToken,!1);else{$("#loginBtn").show(),$("#logoutBtn").hide(),$("#reconnect-warning").show();const e=`<div class="alert alert-warning"><i class="fa-regular fa-circle-exclamation"></i>&nbsp;${vdata.localizer.fbNotConnected.replaceAll("{0}",vdata.settings.shortName)}</div>`;$("#reconnect-dialogue").empty().append(e)}}function d(e,t,n){return $.post({url:vdata.actions.refreshAccessToken,data:{metaId:e,token:t,reAssignMetaProfile:n}}).done((function(){$("#reconnect-warning").hide(),FB.api("/me",{fields:"name"},(function(e){const t=`<div class="alert alert-success my-3"><i class="fa-regular fa-circle-check"></i>&nbsp;${vdata.localizer.fbConnected.replaceAll("{0}",e.name).replaceAll("{1}",vdata.settings.shortName)}</div>`;$("#reconnect-dialogue").empty().append(t)}))})).fail((function(n,o,a){if(409!==n.status)return FB.logout(l),corprio.formatError(n,o,a);DevExpress.ui.dialog.custom({title:vdata.localizer.confirmation,messageHtml:`<p>${vdata.localizer.finalWarning}</p>`,buttons:[{text:vdata.localizer.confirm,onClick:function(){d(e,t,!0)},type:"danger"},{text:vdata.localizer.cancel,onClick:function(){FB.logout(l)},type:"normal"}]}).show()}))}window.fbAsyncInit=function(){FB.init({appId:vdata.settings.metaApiID,cookie:!0,xfbml:!0,version:vdata.settings.metaApiVersion}),FB.getLoginStatus((function(e){u(e)}))},s="script",i="facebook-jssdk",r=(a=document).getElementsByTagName(s)[0],a.getElementById(i)||((c=a.createElement(s)).id=i,c.src="https://connect.facebook.net/en_US/sdk.js",r.parentNode.insertBefore(c,r)),$((function(){$("#loginBtn").on("click",(function(){FB.login((e=>{e.authResponse&&l()}),{scope:t.PERMISSIONS.toString(),return_scopes:!0})})),$("#logoutBtn").on("click",(function(){FB.logout(l)}))}))})(),o})()));