{"version":3,"file":"Index.js","mappings":"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","sources":["webpack://vjs/webpack/universalModuleDefinition","webpack://vjs/./Views/Checkout/Enums.ts","webpack://vjs/webpack/bootstrap","webpack://vjs/./Views/Checkout/Index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vjs\"] = factory();\n\telse\n\t\troot[\"vjs\"] = factory();\n})(self, () => {\nreturn ","// IMPORTANT: the order of the following options must be in line with that defined on the server side\r\nexport enum DeliveryOption {\r\n    NoOption,\r\n    SelfPickup,\r\n    Shipping\r\n}\r\n\r\n\r\nexport enum CorprioPhoneNumberType {\r\n    General,\r\n    Home,\r\n    Work,\r\n    Mobile,\r\n    Fax\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { DeliveryOption } from './Enums';\r\nimport { CheckoutDataModel, CheckoutOrderLine, ProductVariationInfo } from './Interfaces';\r\n\r\ndeclare const vdata: {\r\n    actions: {\r\n        deleteSalesOrderLine: string;\r\n        editSalesOrderLine: string;\r\n        finalizeSalesOrder: string;\r\n        getProductVariations: string;\r\n        voidAndRecall: string;\r\n        voidOrder: string;\r\n    };\r\n    localizer: {\r\n        addNewProduct: string;\r\n        billTo: string;\r\n        cancel: string;\r\n        cancelOrder: string;\r\n        cannotEdit_PaymentProcessing: string;\r\n        cannotEdit_VoidedOrPaid: string;\r\n        colour: string;\r\n        confirm: string;\r\n        confirmAddProduct: string;\r\n        confirmVoidOrder: string;\r\n        confirmation: string;\r\n        delete: string;\r\n        deliveryCharge: string;\r\n        deliveryMethod: string;\r\n        editQuantity: string;\r\n        editVariant: string;\r\n        errMsgChatbotNotFound: string;\r\n        errMsgUnselectedVariations: string;\r\n        familyName: string;\r\n        freeShippingHint1: string;\r\n        freeShippingHint2: string;\r\n        freeShippingQualified: string;\r\n        givenName: string;\r\n        invalidFeedback_AddressLine1: string;\r\n        invalidFeedback_CountryCode: string;\r\n        invalidFeedback_FamilyName: string;\r\n        invalidFeedback_GivenName: string;\r\n        invalidFeedback_InvalidPhoneNumber: string;\r\n        noDeliveryMethod: string;\r\n        noPickupInstruction: string;\r\n        proceedToPayment: string;\r\n        processing: string;\r\n        quantity: string;\r\n        receipient: string;\r\n        remainingStockMessage: string;\r\n        remainingStockTitle: string;\r\n        save: string;\r\n        selfPickup: string;\r\n        shipToCustomer: string;\r\n        size: string;\r\n        titleEditVariant: string;\r\n        warningDeleteProduct: string;\r\n    };\r\n    model: {\r\n        allowSelfPickup: string;\r\n        billedPersonFamilyName: string;\r\n        billedPersonGivenName: string;\r\n        billedPhoneCountryCallingCode: string;\r\n        billedPhoneNationalDestinationCode: string;\r\n        billedPhoneSubscriberNumber: string;\r\n        chosenDeliveryMethod: string;\r\n        currencyCode: string;\r\n        defaultCountryCode: string;\r\n        deliveryAddress_City: string;\r\n        deliveryAddress_CountryAlphaCode: string;\r\n        deliveryAddress_Line1: string;\r\n        deliveryAddress_Line2: string;\r\n        deliveryAddress_PostalCode: string;\r\n        deliveryAddress_State: string;\r\n        deliveryChargeAmount: string;\r\n        deliveryContact_FamilyName: string;\r\n        deliveryContact_GivenName: string;\r\n        deliveryPhoneCountryCallingCode: string;\r\n        deliveryPhoneNationalDestinationCode: string;\r\n        deliveryPhoneSubscriberNumber: string;\r\n        freeShippingAmount: string;\r\n        hasFreeShipping: string;\r\n        isOrderVoidOrPaid: string;\r\n        isPaymentClicked: string;\r\n        orderLineJsonString: string;\r\n        organizationEmailAddress: string;\r\n        organizationID: string;\r\n        organizationShortName: string;\r\n        provideShipping: string;\r\n        salesOrderID: string;\r\n        selfPickUpInstruction: string;\r\n    };\r\n    settings: {\r\n        appUrl: string;\r\n        paymentPortalUrl: string;\r\n    };\r\n};\r\n\r\n// magic numbers\r\nconst VALIDATION_GROUP = 'checkout';\r\nconst DATASET_ATTRIBUTE = 'attribute';\r\nconst DATASET_ORDERLINE = 'orderline';\r\n\r\n// global variables (state)\r\nlet chosenDeliveryMethod: DeliveryOption = DeliveryOption.NoOption;\r\nlet allowSelfPickup: boolean = false;\r\nlet provideShipping: boolean = false;\r\nlet hasFreeShippingPolicy: boolean = false;\r\nlet freeShippingAmount: number = 0;\r\nlet isPaymentClicked: boolean = false;\r\nlet isOrderVoidOrPaid: boolean = false;\r\nlet totalQty: number = 0;\r\nlet totalAmount: number = 0;\r\nlet actualDeliveryCharge: number = 0;\r\nconst availableDeliveryMethods: DeliveryOption[] = [];\r\nlet orderLines: CheckoutOrderLine[] = [];\r\n\r\n\r\nfunction deleteRow() {\r\n    if (isPaymentClicked) { return; }\r\n\r\n    // IMPORTANT: since we are using 'this', the following two lines must NOT be nested in another function\r\n    const salesOrderLineID = $(this).data(DATASET_ORDERLINE);\r\n    const $row = $(this).closest('.orderline-row');\r\n\r\n    DevExpress.ui.dialog\r\n        .confirm(vdata.localizer.warningDeleteProduct, vdata.localizer.confirmation)\r\n        .done(function (dialogResult) {            \r\n            if (dialogResult) {\r\n                $.post({\r\n                    url: vdata.actions.deleteSalesOrderLine,\r\n                    data: {\r\n                        salesOrderID: vdata.model.salesOrderID,\r\n                        salesOrderLineID: salesOrderLineID\r\n                    }\r\n                }).done(function () {                    \r\n                    orderLines = orderLines.filter(x => x.SalesOrderLineID !== salesOrderLineID);                    \r\n                    $row.remove();\r\n                    recalculateTotals();\r\n                    adjustDeliveryCharge();\r\n                    renderTotals();\r\n                    renderShippingChoice($('#shipping-choice'));\r\n                }).fail(corprio.formatError);\r\n            }\r\n        });\r\n}\r\n\r\nfunction editQtyTemplate(line: CheckoutOrderLine) {\r\n    const $content = $(`<div id=\"popup-${line.SalesOrderLineID}\">`);\r\n    $('<label class=\"flex-even\">').html(vdata.localizer.quantity).appendTo($content);\r\n    const $qtyDiv = $('<div class=\"flex-even mb-4\">').appendTo($content);\r\n    const $numBox = $qtyDiv.dxNumberBox({\r\n        width: String(Math.trunc(line.Quantity)).length * 8 + 92,  // note: the quantity is orginally a decimal\r\n        value: Math.trunc(line.Quantity),\r\n        max: line.DisallowOutOfStock ? Math.max(0, line.ProductStockLevel) : undefined,\r\n        min: 0,\r\n        buttons: [\r\n            {\r\n                location: 'before',\r\n                name: 'minus',\r\n                options: {\r\n                    icon: 'minus',\r\n                    onClick: function () {                        \r\n                        $numBox.option('value', Math.max(0, $numBox.option('value') - 1));\r\n                    },\r\n                },\r\n            },\r\n            {\r\n                location: 'after',\r\n                name: 'add',\r\n                options: {\r\n                    icon: 'add',\r\n                    onClick: function () {                        \r\n                        $numBox.option('value', $numBox.option('value') + 1);\r\n                    },\r\n                },\r\n            }\r\n        ],\r\n        readOnly: isPaymentClicked,\r\n        onValueChanged: function (e) {\r\n            let changedValue: number = e.value;\r\n            if (changedValue < 0) {\r\n                $numBox.option('value', 0);  // WARNING: this function will run again\r\n                return;\r\n            }\r\n            if (line.DisallowOutOfStock && changedValue > line.ProductStockLevel) {\r\n                DevExpress.ui.dialog.alert(vdata.localizer.remainingStockMessage.replaceAll('{0}', line.ProductName).replaceAll('{1}', String(line.ProductStockLevel)), vdata.localizer.remainingStockTitle);\r\n                $numBox.option('value', Math.max(0, line.ProductStockLevel));  // WARNING: this function will run again\r\n                return;\r\n            }\r\n            if (changedValue % 1) {\r\n                $numBox.option('value', Math.trunc(changedValue));  // WARNING: this function will run again\r\n                return;\r\n            }\r\n            line.Quantity = changedValue;\r\n            $qtyDiv.css('width', String(changedValue).length * 8 + 92);  // re-adjust the width if necessary            \r\n        },\r\n        onInput: function (e) {\r\n            const value = +$(e.event.target).val();\r\n            if (line.DisallowOutOfStock && value > line.ProductStockLevel) {\r\n                DevExpress.ui.dialog.alert(vdata.localizer.remainingStockMessage.replaceAll('{0}', line.ProductName).replaceAll('{1}', String(line.ProductStockLevel)), vdata.localizer.remainingStockTitle);                \r\n                return;\r\n            }\r\n            \r\n        }\r\n    }).dxNumberBox('instance');  // note: we have to manually initialize a widget instance and attach it to the container\r\n\r\n    $('<button class=\"btn btn-info m-2\">').html(vdata.localizer.save).on('click', function () { saveRow(line) }).appendTo($content);\r\n    $('<button class=\"btn btn-secondary m-2\">').html(vdata.localizer.cancel).on('click', hidePopup).appendTo($content);\r\n\r\n    return $content;\r\n}\r\n\r\nfunction hidePopup() {\r\n    const $popup = $(\"#edit-popup\").dxPopup(\"instance\");\r\n    $popup.hide();\r\n}\r\n\r\nfunction determineProduct(line: CheckoutOrderLine) {\r\n    if (!(line.ChildProductInfo?.length > 1)) { return hidePopup(); }\r\n\r\n    const $selectBoxes = $('.productAttr');\r\n    const selectedVariations: ProductVariationInfo[] = [];\r\n    const missingAttributes: string[] = [];\r\n    let numberOfAttributes = 0;  // count the number of unique attributes\r\n    $selectBoxes.each(function (_, obj: HTMLElement) {\r\n        numberOfAttributes++;\r\n        const selected = $(obj).dxSelectBox().dxSelectBox('instance').option(\"value\");\r\n        if (selected) {\r\n            const productVariation: ProductVariationInfo = { Attribute: $(obj).data(DATASET_ATTRIBUTE), Code: selected, Name: selected };\r\n            selectedVariations.push(productVariation);\r\n        } else {\r\n            let attributeName = $(obj).data(DATASET_ATTRIBUTE);\r\n            if (attributeName === 'size') {\r\n                attributeName = vdata.localizer.size;\r\n            } else if (attributeName === 'colour') {\r\n                attributeName = vdata.localizer.colour;\r\n            }\r\n            missingAttributes.push(attributeName);\r\n        }\r\n    });\r\n\r\n    if (selectedVariations.length !== numberOfAttributes) {\r\n        DevExpress.ui.dialog.alert(vdata.localizer.errMsgUnselectedVariations.replaceAll('{0}', missingAttributes.join(', ')), vdata.localizer.titleEditVariant);\r\n        return;\r\n    }\r\n\r\n    let selectedProductID: string;    \r\n    for (const childProduct of line.ChildProductInfo) {\r\n        let count = 0;\r\n        for (const productVariation of childProduct.ChildProductAttributes) {            \r\n            count++;\r\n            if (!selectedVariations.find(x => x.Attribute === productVariation.Attribute && x.Code === productVariation.Code)) {\r\n                break;\r\n            }\r\n            if (count === numberOfAttributes) {\r\n                selectedProductID = childProduct.ID;\r\n                break;\r\n            }\r\n        }\r\n        if (selectedProductID) { break; }\r\n    }\r\n\r\n    if (!selectedProductID) {\r\n        const combinations: string[] = [];\r\n        for (let i = 0; i < selectedVariations.length; i++) {\r\n            combinations.push(`${selectedVariations[i].Attribute}:${selectedVariations[i].Code}`);\r\n        }\r\n        console.log(`${combinations.join(',')} is not available.`);\r\n        return hidePopup();\r\n    }\r\n\r\n    line.ProductID = selectedProductID;\r\n    return saveRow(line);\r\n}\r\n\r\n// note: a template function CANNOT be async\r\nfunction editVariantTemplate(line: CheckoutOrderLine) {    \r\n    const $content = $(`<div id=\"popup-${line.SalesOrderLineID}\">`);    \r\n\r\n    if (line.ChildProductInfo.length) {        \r\n        const combinations: Record<string, ProductVariationInfo[]> = {};        \r\n        for (const childProduct of line.ChildProductInfo) {\r\n            for (const productVariation of childProduct.ChildProductAttributes) {\r\n                if (combinations[productVariation.Attribute]?.length) {\r\n                    if (!combinations[productVariation.Attribute].find(x => x.Code === productVariation.Code)) {\r\n                        combinations[productVariation.Attribute].push(productVariation);\r\n                    }\r\n                } else {\r\n                    combinations[productVariation.Attribute] = [productVariation];\r\n                }\r\n            }\r\n        }\r\n\r\n        for (const attribute in combinations) {\r\n            let attributeName;\r\n            switch (attribute) {\r\n                case 'size':\r\n                    attributeName = vdata.localizer.size;\r\n                    break;\r\n                case 'colour':\r\n                    attributeName = vdata.localizer.colour;\r\n                    break;\r\n                default:\r\n                    attributeName = attribute;\r\n            }\r\n\r\n            $('<div class=\"productAttr mb-4\">').appendTo($content).data(DATASET_ATTRIBUTE, attribute).dxSelectBox({\r\n                dataSource: combinations[attribute],                                \r\n                label: attributeName,\r\n                labelMode: 'floating',\r\n                displayExpr: 'Name',\r\n                valueExpr: 'Code',\r\n                onValueChanged: function (e) {\r\n                    console.log(e.value);\r\n                },\r\n            });\r\n\r\n        }\r\n    }\r\n    \r\n    $('<button class=\"btn btn-info m-2\">').html(vdata.localizer.save).on('click', function () { determineProduct(line) }).appendTo($content);\r\n    $('<button class=\"btn btn-secondary m-2\">').html(vdata.localizer.cancel).on('click', hidePopup).appendTo($content);\r\n\r\n    return $content;\r\n}\r\n\r\nfunction saveRow(line: CheckoutOrderLine) {\r\n    return $.post({\r\n        url: vdata.actions.editSalesOrderLine,\r\n        data: {\r\n            salesOrderID: vdata.model.salesOrderID,\r\n            salesOrderLineID: line.SalesOrderLineID,\r\n            productID: line.ProductID,\r\n            quantity: line.Quantity\r\n        }\r\n    }).done((newLine: CheckoutOrderLine) => {\r\n        for (const line of orderLines) {\r\n            if (line.SalesOrderLineID === newLine.SalesOrderLineID) {\r\n                line.DisallowOutOfStock = newLine.DisallowOutOfStock;\r\n                line.NetUnitPrice = newLine.NetUnitPrice;\r\n                line.ProductDesc = newLine.ProductDesc;\r\n                line.ProductID = newLine.ProductID;\r\n                line.ProductName = newLine.ProductName;\r\n                line.ProductStockLevel = newLine.ProductStockLevel;\r\n                line.Quantity = newLine.Quantity;                \r\n                line.UOMCode = newLine.UOMCode;\r\n                line.URL = newLine.URL;\r\n                break;\r\n            }\r\n        }\r\n        prepareCartTable();\r\n        hidePopup();\r\n        recalculateTotals();\r\n        adjustDeliveryCharge();\r\n        renderTotals();\r\n        renderShippingChoice($('#shipping-choice'));\r\n    }).fail(corprio.formatError);\r\n}\r\n\r\nfunction recalculateTotals() {\r\n    totalQty = orderLines.reduce(function (result, item) {\r\n        result += item.Quantity;\r\n        return result;\r\n    }, 0);\r\n\r\n    totalAmount = orderLines.reduce(function (result, item) {\r\n        result += item.Quantity * item.NetUnitPrice;\r\n        return result;\r\n    }, 0);\r\n}\r\n\r\nfunction renderTotals() {\r\n    $('#order-subtotal').text(StaticData.FormatCurrency(totalAmount, vdata.model.currencyCode));\r\n    if (actualDeliveryCharge > 0) {\r\n        $('#delivery-charge-div').show();\r\n        $('#delivery-charge-amt').text(StaticData.FormatCurrency(actualDeliveryCharge, vdata.model.currencyCode));\r\n    } else {\r\n        $('#delivery-charge-div').hide();\r\n    }\r\n    $('#order-total').text(StaticData.FormatCurrency(totalAmount + actualDeliveryCharge, vdata.model.currencyCode));    \r\n}\r\n\r\nfunction prepareBillToFields(defCallingCode: string) {\r\n    const $billToFieldset = $('<fieldset id=\"bill-to-fieldset\">').appendTo($('#customer-info-form'));\r\n    $('<h5>').addClass('mt-3').text(vdata.localizer.billTo).appendTo($billToFieldset);\r\n\r\n    const $givenNameWidget = $('<div id=\"bill-person-given-name\">')\r\n        .dxTextBox({\r\n            value: vdata.model.billedPersonGivenName,\r\n            disabled: isPaymentClicked,\r\n            maxLength: 100,\r\n            label: vdata.localizer.givenName,\r\n            labelMode: 'floating',\r\n            inputAttr: { autocomplete: 'given-name', name: 'bill-person-given-name-input', id: 'bill-person-given-name-input' },\r\n            onValueChanged: function (e) {\r\n                const deliveryName = $('#delivery-contact-given-name');\r\n                if (deliveryName.length) deliveryName.dxTextBox('option', 'value', e.value);\r\n            },\r\n        })\r\n        .dxValidator({\r\n            validationGroup: VALIDATION_GROUP,\r\n            validationRules: [{ type: 'required', message: vdata.localizer.invalidFeedback_GivenName }]\r\n        });\r\n\r\n    const $familyNameWidget = $('<div id=\"bill-person-family-name\">')\r\n        .dxTextBox({\r\n            value: vdata.model.billedPersonFamilyName,\r\n            disabled: isPaymentClicked,\r\n            maxLength: 100,\r\n            label: vdata.localizer.familyName,\r\n            labelMode: 'floating',\r\n            inputAttr: { autocomplete: 'family-name', name: 'bill-person-family-name-input', id: 'bill-person-family-name-input' },\r\n            onValueChanged: function (e) {\r\n                const deliveryName = $('#delivery-contact-family-name');\r\n                if (deliveryName.length) deliveryName.dxTextBox('option', 'value', e.value)\r\n            }\r\n        })\r\n        .dxValidator({\r\n            validationGroup: VALIDATION_GROUP,\r\n            validationRules: [{ type: 'required', message: vdata.localizer.invalidFeedback_FamilyName }]\r\n        });\r\n    \r\n    $('<div>').addClass('d-flex mb-2').appendTo($billToFieldset).append($givenNameWidget, $familyNameWidget);\r\n    \r\n    const $phoneWidget = $('<div id=\"bill-contact-phone\">').appendTo($billToFieldset);\r\n    corprio.geography.addPhoneNumberTo(\r\n        $phoneWidget,\r\n        vdata.model.billedPhoneSubscriberNumber\r\n            ? { NumberType: 3, CountryCallingCode: vdata.model.billedPhoneCountryCallingCode, NationalDestinationCode: vdata.model.billedPhoneNationalDestinationCode, SubscriberNumber: vdata.model.billedPhoneSubscriberNumber }\r\n            : { NumberType: 3, CountryCallingCode: defCallingCode },\r\n        'contact-phone',\r\n        null,\r\n        function (phoneNumber) {\r\n            if (isPaymentClicked) { return; }\r\n\r\n            const $deliveryPhone = $('#delivery-phone-number');            \r\n            if ($deliveryPhone.length) {\r\n                corprio.geography.setPhoneNumber($deliveryPhone, phoneNumber);\r\n            }\r\n        },\r\n        true,\r\n        VALIDATION_GROUP\r\n    );    \r\n    $phoneWidget.find('.phone').dxValidator({\r\n        validationGroup: VALIDATION_GROUP,\r\n        validationRules: [{\r\n            type: 'custom',\r\n            reevaluate: true,\r\n            message: vdata.localizer.invalidFeedback_InvalidPhoneNumber,\r\n            validationCallback: function (input) {\r\n                if (input.value == null || input.value == \"\" || input.value == undefined) return false;\r\n                return true;\r\n            }\r\n        }]\r\n    });\r\n    if (isPaymentClicked) {\r\n        $phoneWidget.find('input').attr('disabled', 'disabled');\r\n        $phoneWidget.find('div[role=\"button\"]').remove();\r\n    }\r\n}\r\n\r\n// stopped at here; this function worked. you can move on to do the email template/bot/settings\r\nfunction renderShippingChoice($shipToCustomerDiv: JQuery<HTMLElement>) {\r\n    $shipToCustomerDiv.empty();\r\n    $shipToCustomerDiv.append(\r\n        $(`<span class=\"font-weight-bold\">${translateDeliveryOption(DeliveryOption.Shipping)}</span>`)\r\n    );\r\n\r\n    // note: free shipping status is not shown if the customer has proceeded to payment, because the merchant may have adjusted the free shipping policy since then\r\n    if (hasFreeShippingPolicy && !isPaymentClicked) {\r\n        let $freeShippingStatus = $('<span>');\r\n        if (freeShippingAmount > totalAmount) {\r\n            $freeShippingStatus.append('<span class=\"text-warning mr-1\"><i class=\"fa-solid fa-circle-exclamation\"></i></span>', vdata.localizer.freeShippingHint2.replaceAll('{0}', StaticData.FormatCurrency(freeShippingAmount - totalAmount, vdata.model.currencyCode)));\r\n        } else {\r\n            $freeShippingStatus.append('<i class=\"fa-solid fa-circle-check text-success mr-1\"></i>', vdata.localizer.freeShippingQualified);\r\n        }\r\n        $shipToCustomerDiv.append(\r\n            $('<span class=\"ml-2\">').append($('<span>').text('('), $freeShippingStatus, $('<span>').text(')'))\r\n        );\r\n    }\r\n    return $shipToCustomerDiv;\r\n}\r\n\r\nfunction prepareDeliveryMethodFields(defCallingCode: string) {\r\n    const $deliveryMethodFieldset = $('<fieldset id=\"delivery-method-fieldset\">').appendTo($('#customer-info-form'));\r\n\r\n    if (!availableDeliveryMethods.length) {\r\n        $deliveryMethodFieldset.append(\r\n            `<div class=\"font-italic\">${vdata.localizer.noDeliveryMethod.replaceAll('{0}', vdata.model.organizationShortName).replaceAll('{1}', vdata.model.organizationEmailAddress)}</div>`);\r\n        return;\r\n    }\r\n\r\n    // the following scenario could happen if the number of delivery methods went from zero to positive \r\n    // after the user 'clicked' or the order was voided / paid\r\n    if (chosenDeliveryMethod === DeliveryOption.NoOption) { return; }\r\n\r\n    $deliveryMethodFieldset.append(\r\n        $('<h5 class=\"mt-3\">').text(`${vdata.localizer.deliveryMethod}`),\r\n        $('<div id=\"delivery-method\">').dxRadioGroup({\r\n            // dependencies: the following two variables are assigned with adjustGlobalVariables()\r\n            dataSource: availableDeliveryMethods,\r\n            disabled: isPaymentClicked,\r\n            value: chosenDeliveryMethod,\r\n            itemTemplate: function (itemData, _, itemElement) {\r\n                if (itemData === DeliveryOption.SelfPickup) {\r\n                    itemElement.append(\r\n                        $('<div class=\"font-weight-bold\">').text(translateDeliveryOption(DeliveryOption.SelfPickup)),\r\n                        $('<div class=\"delivery-method-info my-2\">').text(vdata.model.selfPickUpInstruction\r\n                            ? vdata.model.selfPickUpInstruction\r\n                            : vdata.localizer.noPickupInstruction.replaceAll('{0}', vdata.model.organizationShortName).replaceAll('{1}', vdata.model.organizationEmailAddress))\r\n                    );\r\n                } else if (itemData === DeliveryOption.Shipping) {\r\n                    const $shipToCustomerDiv = renderShippingChoice($('<div id=\"shipping-choice\">'));                    \r\n                    let $deliveryChargeContent = $('<div>').html(`${vdata.localizer.deliveryCharge}: ${StaticData.FormatCurrency(parseFloat(vdata.model.deliveryChargeAmount), vdata.model.currencyCode)}`);\r\n                    let $freeShippingHint = $('<div class=\"font-weight-bold\">').html(vdata.localizer.freeShippingHint1.replaceAll('{0}', StaticData.FormatCurrency(freeShippingAmount, vdata.model.currencyCode)));\r\n                    itemElement.append(\r\n                        $shipToCustomerDiv,\r\n                        // note: free shipping hint is not shown if the customer has proceeded to payment, because the merchant may have adjusted the free shipping policy since then\r\n                        $('<div class=\"delivery-method-info my-2\">').append(\r\n                            (hasFreeShippingPolicy && !isPaymentClicked) ? [$deliveryChargeContent, $freeShippingHint] : $deliveryChargeContent\r\n                        )\r\n                    );                    \r\n                }\r\n            },\r\n            onValueChanged: function (e) {\r\n                if (isPaymentClicked) return;\r\n\r\n                chosenDeliveryMethod = e.value;\r\n                $('#deliver-to-section').toggle(chosenDeliveryMethod === DeliveryOption.Shipping);\r\n                $('#recipient-section').toggle(chosenDeliveryMethod === DeliveryOption.Shipping);\r\n\r\n                adjustDeliveryCharge();\r\n                $('#delivery-charge-amt').text(StaticData.FormatCurrency(actualDeliveryCharge, vdata.model.currencyCode));\r\n                $('#delivery-charge-div').toggle(chosenDeliveryMethod === DeliveryOption.Shipping);\r\n                $('#order-total').text(StaticData.FormatCurrency(actualDeliveryCharge + totalAmount, vdata.model.currencyCode));\r\n            }\r\n        })\r\n    );\r\n\r\n    if (!provideShipping) return;\r\n\r\n    // a validation callback that is used below (ideally we should tailor-make one for each input)\r\n    function inputValidationForShipping(input) {\r\n        if (chosenDeliveryMethod === DeliveryOption.SelfPickup) return true;\r\n        if (input.value == null || input.value == \"\" || input.value == undefined) return false;\r\n        return true;\r\n    }\r\n\r\n    const $deliverToDiv = $('<div id=\"deliver-to-section\">').appendTo($deliveryMethodFieldset);\r\n    $deliverToDiv.toggle(chosenDeliveryMethod === DeliveryOption.Shipping);\r\n    $deliverToDiv.append(\r\n        $('<h5>').addClass('mt-3').text('Deliver To'),\r\n        $('<div id=\"delivery-address-line1\" class=\"mb-2\">').dxTextBox({\r\n            value: vdata.model.deliveryAddress_Line1,\r\n            disabled: isPaymentClicked,\r\n            maxLength: 250,\r\n            label: corprio.globalization.getMessage('line1'),\r\n            labelMode: 'floating',\r\n            inputAttr: { autocomplete: 'address-line1', name: 'delivery-address-line1-input', id: 'delivery-address-line1-input' }\r\n        }).dxValidator({\r\n            validationGroup: VALIDATION_GROUP, validationRules: [{\r\n                type: 'custom',\r\n                reevaluate: true,\r\n                message: vdata.localizer.invalidFeedback_AddressLine1,\r\n                validationCallback: inputValidationForShipping\r\n            }]\r\n        }),\r\n        $('<div id=\"delivery-address-line2\" class=\"mb-2\">').dxTextBox({\r\n            value: vdata.model.deliveryAddress_Line2,\r\n            disabled: isPaymentClicked,\r\n            maxLength: 250,\r\n            label: corprio.globalization.getMessage('line2'),\r\n            labelMode: 'floating',\r\n            inputAttr: { autocomplete: 'address-line2', name: 'delivery-address-line2-input', id: 'delivery-address-line2-input' }\r\n        }),\r\n        $('<div id=\"delivery-address-city\" class=\"mb-2\">').dxTextBox({\r\n            value: vdata.model.deliveryAddress_City,\r\n            disabled: isPaymentClicked,\r\n            maxLength: 250,\r\n            label: corprio.globalization.getMessage('City'),\r\n            labelMode: 'floating',\r\n            inputAttr: { autocomplete: 'address-level2', name: 'delivery-address-city-input', id: 'delivery-address-city-input' }\r\n        }),\r\n        $('<div id=\"delivery-address-state\" class=\"mb-2\">').dxTextBox({\r\n            value: vdata.model.deliveryAddress_State,\r\n            disabled: isPaymentClicked,\r\n            maxLength: 250,\r\n            label: corprio.globalization.getMessage('State'),\r\n            labelMode: 'floating',\r\n            inputAttr: { autocomplete: 'address-level1', name: 'delivery-address-state-input', id: 'delivery-address-state-input' }\r\n        }),\r\n        $('<div id=\"delivery-address-postal\" class=\"mb-2\">').dxTextBox({\r\n            value: vdata.model.deliveryAddress_PostalCode,\r\n            disabled: isPaymentClicked,\r\n            maxLength: 20,\r\n            label: corprio.globalization.getMessage('PostalCode'),\r\n            labelMode: 'floating',\r\n            inputAttr: { autocomplete: 'postal-code', name: 'delivery-address-postal-input', id: 'delivery-address-postal-input' }\r\n        }),\r\n        $('<div id=\"delivery-address-country-code\" class=\"mb-2\">').dxSelectBox({\r\n            value: vdata.model.defaultCountryCode,\r\n            disabled: isPaymentClicked,\r\n            dataSource: StaticData.CountryList,\r\n            displayExpr: 'Value.GlobalizedName',\r\n            valueExpr: 'Key',\r\n            label: corprio.globalization.getMessage('Country'),\r\n            labelMode: 'floating',            \r\n            searchEnabled: true,\r\n            inputAttr: { autocomplete: 'country-code', name: 'delivery-address-country-code-input', id: 'delivery-address-country-code-input' }\r\n        }).dxValidator({\r\n            validationGroup: VALIDATION_GROUP,\r\n            validationRules: [{\r\n                type: 'custom',\r\n                reevaluate: true,\r\n                message: vdata.localizer.invalidFeedback_CountryCode,\r\n                validationCallback: inputValidationForShipping\r\n            }]\r\n        })\r\n    );\r\n\r\n    const recipientDiv = $('<div id=\"recipient-section\">').appendTo($deliveryMethodFieldset);\r\n    recipientDiv.toggle(chosenDeliveryMethod === DeliveryOption.Shipping);\r\n    $('<h5>').addClass('mt-3').text(vdata.localizer.receipient).appendTo(recipientDiv);\r\n    $('<div>').addClass('d-flex').appendTo(recipientDiv).append(\r\n        $('<div id=\"delivery-contact-given-name\">').dxTextBox({\r\n            value: (isPaymentClicked) ? vdata.model.deliveryContact_GivenName : String($('#bill-person-given-name').find('input').val()),\r\n            disabled: isPaymentClicked,\r\n            maxLength: 100,\r\n            label: 'Given Name',\r\n            labelMode: 'floating',\r\n            inputAttr: { autocomplete: 'given-name', name: 'delivery-contact-given-name-input', id: 'delivery-contact-given-name-input' },\r\n        }).dxValidator({\r\n            validationGroup: VALIDATION_GROUP,\r\n            validationRules: [{\r\n                type: 'custom',\r\n                reevaluate: true,\r\n                message: vdata.localizer.invalidFeedback_GivenName,\r\n                validationCallback: inputValidationForShipping\r\n            }]\r\n        }),\r\n        $('<div id=\"delivery-contact-family-name\">').dxTextBox({\r\n            value: (isPaymentClicked) ? vdata.model.deliveryContact_FamilyName : String($('#bill-person-family-name').find('input').val()),\r\n            disabled: isPaymentClicked,\r\n            maxLength: 100,\r\n            label: 'Family Name',\r\n            labelMode: 'floating',\r\n            inputAttr: { autocomplete: 'family-name', name: 'delivery-contact-family-name-input', id: 'delivery-contact-family-name-input' },\r\n        }).dxValidator({\r\n            validationGroup: VALIDATION_GROUP,\r\n            validationRules: [{\r\n                type: 'custom',\r\n                reevaluate: true,\r\n                message: vdata.localizer.invalidFeedback_FamilyName,\r\n                validationCallback: inputValidationForShipping\r\n            }]\r\n        })\r\n    );\r\n    \r\n    const $deliveryPhone = $('<div id=\"delivery-phone-number\">').appendTo(recipientDiv);\r\n    corprio.geography.addPhoneNumberTo(\r\n        $deliveryPhone,\r\n        vdata.model.deliveryPhoneSubscriberNumber\r\n            ? { NumberType: 3, CountryCallingCode: vdata.model.deliveryPhoneCountryCallingCode, NationalDestinationCode: vdata.model.deliveryPhoneNationalDestinationCode, SubscriberNumber: vdata.model.deliveryPhoneSubscriberNumber }\r\n            : { NumberType: 3, CountryCallingCode: defCallingCode },\r\n        'delivery-phone-number',\r\n        null,\r\n        null,\r\n        false,\r\n        VALIDATION_GROUP);\r\n    $deliveryPhone.find('.phone').dxValidator({\r\n        validationGroup: VALIDATION_GROUP,\r\n        validationRules: [{\r\n            type: 'custom',\r\n            reevaluate: true,\r\n            message: vdata.localizer.invalidFeedback_InvalidPhoneNumber,\r\n            validationCallback: inputValidationForShipping\r\n        }]\r\n    });\r\n    if (isPaymentClicked) {\r\n        $deliveryPhone.find('input').attr('disabled', 'disabled');\r\n        $deliveryPhone.find('div[role=\"button\"]').remove();\r\n    }\r\n}\r\n\r\nfunction handleAddProduct() {\r\n    DevExpress.ui.dialog\r\n        .confirm(vdata.localizer.confirmAddProduct, vdata.localizer.confirmation)\r\n        .done(function (dialogResult) {\r\n            if (dialogResult) {\r\n                $.post({\r\n                    url: vdata.actions.voidAndRecall,\r\n                    data: { salesOrderID: vdata.model.salesOrderID }\r\n                }\r\n                ).done(() => { location.reload() }\r\n                ).fail(function (jqXHR, textStatus, errorThrown) {\r\n                    if (jqXHR.status != 410) {\r\n                        return corprio.formatError(jqXHR, textStatus, errorThrown);\r\n                    }\r\n\r\n                    var prompt = DevExpress.ui.dialog.custom({\r\n                        title: vdata.localizer.confirmation,\r\n                        messageHtml: `<p>${vdata.localizer.errMsgChatbotNotFound}</p>`,\r\n                        buttons: [{\r\n                            text: vdata.localizer.confirm,\r\n                            onClick: function () {\r\n                                return $.post({\r\n                                    url: vdata.actions.voidOrder,\r\n                                    data: { salesOrderID: vdata.model.salesOrderID }\r\n                                }\r\n                                ).done(() => { location.reload() }\r\n                                ).fail(corprio.formatError);\r\n                            },\r\n                            type: \"danger\",\r\n                        }, {\r\n                            text: vdata.localizer.cancel,                            \r\n                            type: \"normal\",\r\n                        }]\r\n                    });\r\n                    prompt.show();\r\n\r\n                });\r\n            }\r\n        });\r\n}\r\n\r\nfunction handleVoidOrder() {\r\n    DevExpress.ui.dialog\r\n        .confirm(vdata.localizer.confirmVoidOrder, vdata.localizer.confirmation)\r\n        .done(function (dialogResult) {\r\n            if (dialogResult) {\r\n                $.post({\r\n                    url: vdata.actions.voidOrder,\r\n                    data: { salesOrderID: vdata.model.salesOrderID }\r\n                }\r\n                ).done(() => { location.reload() }\r\n                ).fail(corprio.formatError);\r\n            }\r\n        });\r\n}\r\n\r\nfunction prepareCustomerInfoForm() {        \r\n    const $form = $('#customer-info-form').addClass('customer-info my-4');    \r\n    const defCountryInfo = StaticData.CountryList.find(c => c.Key === vdata.model.defaultCountryCode);\r\n    const defCallingCode = defCountryInfo && defCountryInfo.Value.CountryCallingCode;    \r\n    prepareBillToFields(defCallingCode);\r\n    prepareDeliveryMethodFields(defCallingCode);\r\n            \r\n    $('<div id=\"validation-summary-purchase\">').appendTo($form).dxValidationSummary({ validationGroup: VALIDATION_GROUP });\r\n    const buttons = $('<div>').appendTo($('<div>').addClass('d-flex justify-content-center mt-2 mb-2').appendTo($form));\r\n    if (!isPaymentClicked) {\r\n        buttons.append($('<button type=\"submit\">').addClass('btn btn-primary m-2').html(`<i class=\"fas fa-check mr-1\"></i>${vdata.localizer.proceedToPayment}`));\r\n    }\r\n    if (!isOrderVoidOrPaid) {\r\n        buttons.append($('<button type=\"button\">').addClass('btn btn-danger m-2').html(`<i class=\"fas fa-times mr-1\"></i>${vdata.localizer.cancelOrder}`).on('click', handleVoidOrder));\r\n    }\r\n    \r\n    const loadPanel = $('#load-panel').dxLoadPanel({\r\n        message: vdata.localizer.processing,\r\n        visible: false,\r\n        showIndicator: true,\r\n        showPane: true,\r\n        shading: true,\r\n        hideOnOutsideClick: false\r\n    }).dxLoadPanel('instance');\r\n\r\n    $form.on('submit', function (event: Event) {\r\n        event.preventDefault();\r\n\r\n        let validationGroup = DevExpress.validationEngine.getGroupConfig(VALIDATION_GROUP);\r\n        if (validationGroup) {\r\n            let validationResult = validationGroup.validate();\r\n            if (!validationResult.isValid) {\r\n                $('#validation-summary-purchase')[0].scrollIntoView({ behavior: 'smooth' })\r\n                return;\r\n            }\r\n        }\r\n\r\n        const data: CheckoutDataModel = {\r\n            BillPerson: {\r\n                FamilyName: $('#bill-person-family-name').dxTextBox('option', 'value'),\r\n                GivenName: $('#bill-person-given-name').dxTextBox('option', 'value')\r\n            },\r\n            BillContactPhone: corprio.geography.getPhoneNumber($('#bill-contact-phone')),\r\n            ChosenDeliveryMethod: chosenDeliveryMethod,\r\n            SalesOrderID: vdata.model.salesOrderID,\r\n        };\r\n        if (chosenDeliveryMethod === DeliveryOption.Shipping) {            \r\n            data.DeliveryAddress = {\r\n                Line1: $('#delivery-address-line1').dxTextBox('option', 'value'),\r\n                Line2: $('#delivery-address-line2').dxTextBox('option', 'value'),\r\n                City: $('#delivery-address-city').dxTextBox('option', 'value'),\r\n                PostalCode: $('#delivery-address-postal').dxTextBox('option', 'value'),\r\n                State: $('#delivery-address-state').dxTextBox('option', 'value'),\r\n                CountryAlphaCode: $('#delivery-address-country-code').dxSelectBox('option', 'value')\r\n            };\r\n            data.DeliveryContact = {\r\n                FamilyName: $('#delivery-contact-family-name').dxTextBox('option', 'value'),\r\n                GivenName: $('#delivery-contact-given-name').dxTextBox('option', 'value')\r\n            };\r\n            data.DeliveryContactPhone = corprio.geography.getPhoneNumber($('#delivery-phone-number'));\r\n        }\r\n        loadPanel.show();\r\n        $.ajax({\r\n            url: vdata.actions.finalizeSalesOrder,\r\n            type: 'POST',\r\n            contentType: 'application/json;charset=utf-8',\r\n            data: JSON.stringify(data),\r\n            success: function () {\r\n                window.location.replace(`${vdata.settings.paymentPortalUrl}/T42/RecePayment/order/${vdata.model.salesOrderID}?successUrl=${vdata.settings.appUrl}/${vdata.model.organizationID}/thankyou&failUrl=${vdata.settings.appUrl}/${vdata.model.organizationID}/paymentfailed`);\r\n            },\r\n            complete: function () {\r\n                loadPanel.hide();\r\n            },\r\n            error: corprio.formatError\r\n        });\r\n    });\r\n}\r\n\r\nfunction translateDeliveryOption(deliveryOption: DeliveryOption) {\r\n    switch (deliveryOption) {\r\n        case DeliveryOption.SelfPickup:\r\n            return vdata.localizer.selfPickup;\r\n        case DeliveryOption.Shipping:\r\n            return vdata.localizer.shipToCustomer;        \r\n    }\r\n}\r\n\r\nfunction adjustDeliveryCharge() {\r\n    // note: if the customer has already proceeded to payment, then any delivery charge would have been included in the order line\r\n    if (isPaymentClicked || chosenDeliveryMethod !== DeliveryOption.Shipping) {\r\n        actualDeliveryCharge = 0;\r\n    } else if (hasFreeShippingPolicy && freeShippingAmount < totalAmount) {\r\n        actualDeliveryCharge = 0;\r\n    } else {\r\n        actualDeliveryCharge = parseFloat(vdata.model.deliveryChargeAmount);\r\n        actualDeliveryCharge = isNaN(actualDeliveryCharge) ? 0 : actualDeliveryCharge;\r\n    }\r\n}\r\n\r\nfunction adjustGlobalVariables() {        \r\n    try {\r\n        // note: the JSON string provided by the backend has double quotation marks replaced with &quot;\r\n        orderLines = JSON.parse(vdata.model.orderLineJsonString.replaceAll('&quot;', '\"'));\r\n    } catch (e) {\r\n        console.log(`Failed to parse order lines. ${e}`);\r\n        orderLines.length = 0;\r\n    }\r\n\r\n    allowSelfPickup = vdata.model.allowSelfPickup.toLowerCase() === 'true';\r\n    provideShipping = vdata.model.provideShipping.toLowerCase() === 'true';\r\n    isOrderVoidOrPaid = vdata.model.isOrderVoidOrPaid.toLowerCase() === 'true';\r\n\r\n    // if for some reason (e.g., the merchant has processed the order using SalesMaster) the order has been voided/paid\r\n    // even before the customer has clicked the payment button, we act as if the button has been clicked\r\n    isPaymentClicked = isOrderVoidOrPaid ? true : vdata.model.isPaymentClicked.toLowerCase() === 'true';\r\n    if (isPaymentClicked) {        \r\n        // note: the enums from backend become string literals of their NAMES, not '0', '1', '2', etc.\r\n        switch (vdata.model.chosenDeliveryMethod) {\r\n            case 'SelfPickup':\r\n                chosenDeliveryMethod = DeliveryOption.SelfPickup;\r\n                break;\r\n            case 'Shipping':\r\n                chosenDeliveryMethod = DeliveryOption.Shipping;\r\n                break;\r\n            default:\r\n                chosenDeliveryMethod = DeliveryOption.NoOption;\r\n                break;\r\n        }\r\n\r\n        // the merchant may have disabled the delivery method that the buyer had chosen, but we'd act as if the method is still available\r\n        if (chosenDeliveryMethod === DeliveryOption.SelfPickup) {\r\n            allowSelfPickup = true;\r\n        } else if (chosenDeliveryMethod === DeliveryOption.Shipping) {\r\n            provideShipping = true;\r\n        }\r\n    }\r\n        \r\n    if (allowSelfPickup) {\r\n        availableDeliveryMethods.push(DeliveryOption.SelfPickup);\r\n        if (!isPaymentClicked) {\r\n            chosenDeliveryMethod = DeliveryOption.SelfPickup;\r\n        }\r\n    }\r\n    if (provideShipping) {\r\n        availableDeliveryMethods.push(DeliveryOption.Shipping);\r\n        if (!isPaymentClicked && !allowSelfPickup) {\r\n            chosenDeliveryMethod = DeliveryOption.Shipping;\r\n        }\r\n    }\r\n    \r\n    hasFreeShippingPolicy = vdata.model.hasFreeShipping.toLowerCase() === 'true';\r\n    freeShippingAmount = parseFloat(vdata.model.freeShippingAmount);\r\n    freeShippingAmount = isNaN(freeShippingAmount) ? 0 : freeShippingAmount;\r\n    adjustDeliveryCharge();\r\n}\r\n\r\nfunction renderReminder() {\r\n    const $reminder = $('#reminderPopup');\r\n\r\n    if (isPaymentClicked) {\r\n        $reminder.append($('<h6 class=\"my-4\">').append(\r\n            $('<span class=\"text-warning mr-1\">').append($('<i class=\"fa-solid fa-circle-exclamation\">')),\r\n            isOrderVoidOrPaid ? vdata.localizer.cannotEdit_VoidedOrPaid : vdata.localizer.cannotEdit_PaymentProcessing\r\n        ));\r\n    } \r\n}\r\n\r\nfunction editProduct() {\r\n    if (isPaymentClicked) { return; }\r\n\r\n    const salesOrderLineID: string = $(this).data(DATASET_ORDERLINE);\r\n    const relevantOrderLine = orderLines.filter(x => x.SalesOrderLineID === salesOrderLineID);\r\n    if (!relevantOrderLine?.length) { return; }  // note: empty array is truthy, even though ([] == false) is evaluated as true\r\n\r\n    $(\"#edit-popup\").dxPopup({\r\n        contentTemplate: () => editVariantTemplate(relevantOrderLine[0]),\r\n        showTitle: true,\r\n        title: vdata.localizer.editVariant,\r\n        width: '250px',\r\n        height: '250px',\r\n        resizeEnabled: true,\r\n        position: 'center',\r\n    });\r\n\r\n    const $popup = $(\"#edit-popup\").dxPopup(\"instance\");\r\n    $popup.show();\r\n}\r\n\r\nfunction editQty() {\r\n    if (isPaymentClicked) { return; }\r\n\r\n    const salesOrderLineID: string = $(this).data(DATASET_ORDERLINE);\r\n    const relevantOrderLine = orderLines.filter(x => x.SalesOrderLineID === salesOrderLineID);\r\n    if (!relevantOrderLine?.length) { return; }  // note: empty array is truthy, even though ([] == false) is evaluated as true\r\n\r\n    $(\"#edit-popup\").dxPopup({\r\n        contentTemplate: () => editQtyTemplate(relevantOrderLine[0]),\r\n        showTitle: true,\r\n        title: vdata.localizer.editQuantity,\r\n        width: '250px',\r\n        height: '250px',\r\n        resizeEnabled: true,\r\n        position: 'center',\r\n    });\r\n\r\n    const $popup = $(\"#edit-popup\").dxPopup(\"instance\");\r\n    $popup.show();\r\n}\r\n\r\nfunction prepareCartTable() {\r\n    if (!orderLines.length) { return; }\r\n\r\n    const $cart = $('#cart-items').empty();    \r\n    for (const line of orderLines) {\r\n        // note: each row has 4 cells\r\n        const $row = $(`<tr class=\"orderline-row\">`).data(DATASET_ORDERLINE, line.SalesOrderLineID).appendTo($cart);\r\n\r\n        // cell #1\r\n        const $productImg = line.URL\r\n            ? $('<div class=\"rounded\">').append($(`<img src=\"${line.URL}\" alt=\"${line.ProductName}\" class=\"cart-image img-cover square\">`))\r\n            : $('<div class=\"empty-image rounded square\">').append($('<i class=\"fa-solid fa-image\">'))\r\n        const $deleteButton = $(`<button class=\"btn p-1\">`)\r\n            .attr('title', vdata.localizer.delete)\r\n            .data(DATASET_ORDERLINE, line.SalesOrderLineID)\r\n            .on('click', deleteRow)\r\n            .append($('<i class=\"fa-solid fa-trash\">'));\r\n        $('<td>').appendTo($row).append($('<div>').append(isPaymentClicked ? $productImg : [$productImg, $deleteButton]));\r\n\r\n        // cell #2\r\n        const $productDescription = $('<span class=\"mr-1\">').html(line.ProductDesc);\r\n        const $changeVariantButton = $(`<button class=\"btn p-1\">`)\r\n            .attr('title', vdata.localizer.titleEditVariant)\r\n            .data(DATASET_ORDERLINE, line.SalesOrderLineID)\r\n            .on('click', editProduct)\r\n            .append($('<i class=\"fas fa-pen-to-square\">'));\r\n        $('<td class=\"text-left d-flex\">').appendTo($row).append(\r\n            $('<div class=\"flex-even mr-2\">').html(line.ProductName),\r\n            $('<div class=\"flex-even mr-2\">').append(\r\n                (!isPaymentClicked && line.ChildProductInfo?.length > 1)\r\n                    ? [$productDescription, $changeVariantButton]\r\n                    : $productDescription\r\n            ) ,\r\n        );\r\n\r\n        // cell #3\r\n        $('<td>').appendTo($row).text(StaticData.FormatCurrency(line.NetUnitPrice, vdata.model.currencyCode));\r\n\r\n        // cell #4\r\n        const $lineQty = $('<span class=\"mr-1\">').html(String(line.Quantity));\r\n        const $adjustQtyButton = $(`<button class=\"btn p-1\">`)\r\n            .attr('title', vdata.localizer.editQuantity)\r\n            .data(DATASET_ORDERLINE, line.SalesOrderLineID)\r\n            .on('click', editQty)\r\n            .append($('<i class=\"fas fa-pen-to-square\">'))\r\n        $('<td class=\"text-left d-flex\">').appendTo($row).append(\r\n            $('<div class=\"flex-even mr-2\">').append(isPaymentClicked ? $lineQty : [$lineQty, $adjustQtyButton]),\r\n            $('<div class=\"flex-even mr-2\">').html(line.UOMCode),\r\n        );\r\n    }\r\n}\r\n\r\n$(function () {        \r\n    adjustGlobalVariables();\r\n    prepareCartTable();\r\n    recalculateTotals();\r\n    renderReminder();\r\n    prepareCustomerInfoForm();\r\n    renderTotals();\r\n\r\n    if (!isPaymentClicked) {\r\n        $('.add-prd-btn').on('click', handleAddProduct);\r\n    }\r\n});"],"names":[],"sourceRoot":""}