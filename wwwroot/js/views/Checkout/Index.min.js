!function(e,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?exports.vjs=a():e.vjs=a()}(self,(()=>(()=>{"use strict";var e={513:(e,a)=>{var t;Object.defineProperty(a,"__esModule",{value:!0}),a.DeliveryOption=void 0,function(e){e[e.NoOption=0]="NoOption",e[e.SelfPickup=1]="SelfPickup",e[e.Shipping=2]="Shipping"}(t||(a.DeliveryOption=t={}))}},a={};function t(i){var o=a[i];if(void 0!==o)return o.exports;var l=a[i]={exports:{}};return e[i](l,l.exports,t),l.exports}var i={};return(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0});const a=t(513),o="checkout",l="attribute",n="orderline";let d=a.DeliveryOption.NoOption,r=!1,s=!1,c=!1,p=0,u=!1,v=!1,m=!1,f=0,y=0,g=0;const b=[];let h=[];function x(){if(u||v)return;const e=$(this).data(n),a=$(this).closest(".orderline-row");DevExpress.ui.dialog.confirm(vdata.localizer.warningDeleteProduct,vdata.localizer.confirmation).done((function(t){t&&$.post({url:vdata.actions.deleteSalesOrderLine,data:{salesOrderID:vdata.model.salesOrderID,salesOrderLineID:e}}).done((function(){h=h.filter((a=>a.SalesOrderLineID!==e)),a.remove(),D(),T(),P(),O($("#shipping-choice"))})).fail(corprio.formatError)}))}function C(){$("#edit-popup").dxPopup("instance").hide()}function S(e){return $.post({url:vdata.actions.editSalesOrderLine,data:{salesOrderID:vdata.model.salesOrderID,salesOrderLineID:e.SalesOrderLineID,productID:e.ProductID,quantity:e.Quantity}}).done((e=>{for(const a of h)if(a.SalesOrderLineID===e.SalesOrderLineID){a.DisallowOutOfStock=e.DisallowOutOfStock,a.NetUnitPrice=e.NetUnitPrice,a.ProductDesc=e.ProductDesc,a.ProductID=e.ProductID,a.ProductName=e.ProductName,a.ProductStockLevel=e.ProductStockLevel,a.Quantity=e.Quantity,a.UOMCode=e.UOMCode,a.URL=e.URL;break}I(),C(),D(),T(),P(),O($("#shipping-choice"))})).fail(corprio.formatError)}function D(){f=h.reduce((function(e,a){return e+a.Quantity}),0),y=h.reduce((function(e,a){return e+a.Quantity*a.NetUnitPrice}),0)}function P(){$("#order-subtotal").text(StaticData.FormatCurrency(y,vdata.model.currencyCode)),g>0?($("#delivery-charge-div").show(),$("#delivery-charge-amt").text(StaticData.FormatCurrency(g,vdata.model.currencyCode))):$("#delivery-charge-div").hide(),$("#order-total").text(StaticData.FormatCurrency(y+g,vdata.model.currencyCode))}function O(e){if(e.empty(),e.append($(`<span class="font-weight-bold">${N(a.DeliveryOption.Shipping)}</span>`)),c&&!u){let a=$("<span>");p>y?a.append('<span class="text-warning mr-1"><i class="fa-solid fa-circle-exclamation"></i></span>',vdata.localizer.freeShippingHint2.replaceAll("{0}",StaticData.FormatCurrency(p-y,vdata.model.currencyCode))):a.append('<i class="fa-solid fa-circle-check text-success mr-1"></i>',vdata.localizer.freeShippingQualified),e.append($('<span class="ml-2">').append($("<span>").text("("),a,$("<span>").text(")")))}return e}function z(){u||v||DevExpress.ui.dialog.confirm(vdata.localizer.confirmAddProduct,vdata.localizer.confirmation).done((function(e){e&&$.post({url:vdata.actions.voidAndRecall,data:{salesOrderID:vdata.model.salesOrderID}}).done((()=>{location.reload()})).fail((function(e,a,t){if(410!=e.status)return corprio.formatError(e,a,t);DevExpress.ui.dialog.custom({title:vdata.localizer.confirmation,messageHtml:`<p>${vdata.localizer.errMsgChatbotNotFound}</p>`,buttons:[{text:vdata.localizer.confirm,onClick:function(){return $.post({url:vdata.actions.voidOrder,data:{salesOrderID:vdata.model.salesOrderID}}).done((()=>{location.reload()})).fail(corprio.formatError)},type:"danger"},{text:vdata.localizer.cancel,type:"normal"}]}).show()}))}))}function k(){m||v||DevExpress.ui.dialog.confirm(vdata.localizer.confirmVoidOrder,vdata.localizer.confirmation).done((function(e){e&&$.post({url:vdata.actions.voidOrder,data:{salesOrderID:vdata.model.salesOrderID}}).done((()=>{location.reload()})).fail(corprio.formatError)}))}function N(e){switch(e){case a.DeliveryOption.SelfPickup:return vdata.localizer.selfPickup;case a.DeliveryOption.Shipping:return vdata.localizer.shipToCustomer}}function T(){u||d!==a.DeliveryOption.Shipping||c&&p<y?g=0:(g=parseFloat(vdata.model.deliveryChargeAmount),g=isNaN(g)?0:g)}function L(){if(u||v)return;const e=$(this).data(n),a=h.filter((a=>a.SalesOrderLineID===e));(null==a?void 0:a.length)&&($("#edit-popup").dxPopup({contentTemplate:()=>function(e){var a;const t=$(`<div id="popup-${e.SalesOrderLineID}">`);if(e.ChildProductInfo.length){const i={};for(const t of e.ChildProductInfo)for(const e of t.ChildProductAttributes)(null===(a=i[e.Attribute])||void 0===a?void 0:a.length)?i[e.Attribute].find((a=>a.Code===e.Code))||i[e.Attribute].push(e):i[e.Attribute]=[e];for(const e in i){let a;switch(e){case"size":a=vdata.localizer.size;break;case"colour":a=vdata.localizer.colour;break;default:a=e}$('<div class="productAttr mb-4">').appendTo(t).data(l,e).dxSelectBox({dataSource:i[e],label:a,labelMode:"floating",displayExpr:"Name",valueExpr:"Code"})}}return $('<button class="btn btn-info m-2">').html(vdata.localizer.save).on("click",(function(){!function(e){var a;if(!((null===(a=e.ChildProductInfo)||void 0===a?void 0:a.length)>1))return C();const t=$(".productAttr"),i=[],o=[];let n,d=0;if(t.each((function(e,a){d++;const t=$(a).dxSelectBox().dxSelectBox("instance").option("value");if(t){const e={Attribute:$(a).data(l),Code:t,Name:t};i.push(e)}else{let e=$(a).data(l);"size"===e?e=vdata.localizer.size:"colour"===e&&(e=vdata.localizer.colour),o.push(e)}})),i.length===d){for(const a of e.ChildProductInfo){let e=0;for(const t of a.ChildProductAttributes){if(e++,!i.find((e=>e.Attribute===t.Attribute&&e.Code===t.Code)))break;if(e===d){n=a.ID;break}}if(n)break}if(!n){const e=[];for(let a=0;a<i.length;a++)e.push(`${i[a].Attribute}:${i[a].Code}`);return console.log(`${e.join(",")} is not available.`),C()}return e.ProductID=n,S(e)}DevExpress.ui.dialog.alert(vdata.localizer.errMsgUnselectedVariations.replaceAll("{0}",o.join(", ")),vdata.localizer.titleEditVariant)}(e)})).appendTo(t),$('<button class="btn btn-secondary m-2">').html(vdata.localizer.cancel).on("click",C).appendTo(t),t}(a[0]),showTitle:!0,title:vdata.localizer.editVariant,width:"250px",height:"250px",resizeEnabled:!0,position:"center"}),$("#edit-popup").dxPopup("instance").show())}function A(){if(u||v)return;const e=$(this).data(n),a=h.filter((a=>a.SalesOrderLineID===e));(null==a?void 0:a.length)&&($("#edit-popup").dxPopup({contentTemplate:()=>function(e){const a=$(`<div id="popup-${e.SalesOrderLineID}">`);$('<label class="flex-even">').html(vdata.localizer.quantity).appendTo(a);const t=$('<div class="flex-even mb-4">').appendTo(a),i=t.dxNumberBox({width:8*String(Math.trunc(e.Quantity)).length+108,value:Math.trunc(e.Quantity),max:e.DisallowOutOfStock?Math.max(0,e.ProductStockLevel):void 0,min:0,buttons:[{location:"before",name:"minus",options:{icon:"minus",onClick:function(){i.option("value",Math.max(0,i.option("value")-1))}}},{location:"after",name:"add",options:{icon:"add",onClick:function(){i.option("value",i.option("value")+1)}}}],readOnly:u||v,onValueChanged:function(a){let o=a.value;if(!(o<0))return e.DisallowOutOfStock&&o>e.ProductStockLevel?(DevExpress.ui.dialog.alert(vdata.localizer.remainingStockMessage.replaceAll("{0}",e.ProductName).replaceAll("{1}",String(e.ProductStockLevel)),vdata.localizer.remainingStockTitle),void i.option("value",Math.max(0,e.ProductStockLevel))):void(o%1?i.option("value",Math.trunc(o)):(e.Quantity=o,t.css("width",8*String(o).length+108)));i.option("value",0)},onInput:function(a){const t=+$(a.event.target).val();e.DisallowOutOfStock&&t>e.ProductStockLevel&&DevExpress.ui.dialog.alert(vdata.localizer.remainingStockMessage.replaceAll("{0}",e.ProductName).replaceAll("{1}",String(e.ProductStockLevel)),vdata.localizer.remainingStockTitle)}}).dxNumberBox("instance");return $('<button class="btn btn-info m-2">').html(vdata.localizer.save).on("click",(function(){S(e)})).appendTo(a),$('<button class="btn btn-secondary m-2">').html(vdata.localizer.cancel).on("click",C).appendTo(a),a}(a[0]),showTitle:!0,title:vdata.localizer.editQuantity,width:"250px",height:"250px",resizeEnabled:!0,position:"center"}),$("#edit-popup").dxPopup("instance").show())}function I(){var e;if(!h.length)return;const a=$("#cart-items").empty();for(const t of h){const i=$('<tr class="orderline-row">').data(n,t.SalesOrderLineID).appendTo(a),o=t.URL?$('<div class="rounded">').append($(`<img src="${t.URL}" alt="${t.ProductName}" class="cart-image img-cover square">`)):$('<div class="empty-image rounded square">').append($('<i class="fa-solid fa-image">')),l=$('<button class="btn p-1">').attr("title",vdata.localizer.delete).data(n,t.SalesOrderLineID).on("click",x).append($('<i class="fa-solid fa-trash">'));$("<td>").appendTo(i).append($("<div>").append(u?o:[o,l]));const d=$('<span class="mr-1">').html(t.ProductDesc),r=$('<button class="btn p-1">').attr("title",vdata.localizer.titleEditVariant).data(n,t.SalesOrderLineID).on("click",L).append($('<i class="fas fa-pen-to-square">'));$('<td class="text-left d-flex">').appendTo(i).append($('<div class="flex-even mr-2">').html(t.ProductName),$('<div class="flex-even mr-2">').append(!u&&(null===(e=t.ChildProductInfo)||void 0===e?void 0:e.length)>1?[d,r]:d)),$("<td>").appendTo(i).text(StaticData.FormatCurrency(t.NetUnitPrice,vdata.model.currencyCode));const s=$('<span class="mr-1">').html(String(t.Quantity)),c=$('<button class="btn p-1">').attr("title",vdata.localizer.editQuantity).data(n,t.SalesOrderLineID).on("click",A).append($('<i class="fas fa-pen-to-square">'));$('<td class="text-left d-flex">').appendTo(i).append($('<div class="flex-even mr-2">').append(u?s:[s,c]),$('<div class="flex-even mr-2">').html(t.UOMCode))}}$((function(){!function(){try{h=JSON.parse(vdata.model.orderLineJsonString.replaceAll("&quot;",'"'))}catch(e){console.log(`Failed to parse order lines. ${e}`),h.length=0}if(r="true"===vdata.model.allowSelfPickup.toLowerCase(),s="true"===vdata.model.provideShipping.toLowerCase(),v="true"===vdata.model.isPreview.toLowerCase(),m="true"===vdata.model.isOrderVoidOrPaid.toLowerCase(),u=!!m||"true"===vdata.model.isPaymentClicked.toLowerCase(),u){switch(vdata.model.chosenDeliveryMethod){case"SelfPickup":d=a.DeliveryOption.SelfPickup;break;case"Shipping":d=a.DeliveryOption.Shipping;break;default:d=a.DeliveryOption.NoOption}d===a.DeliveryOption.SelfPickup?r=!0:d===a.DeliveryOption.Shipping&&(s=!0)}r&&(b.push(a.DeliveryOption.SelfPickup),u||(d=a.DeliveryOption.SelfPickup)),s&&(b.push(a.DeliveryOption.Shipping),u||r||(d=a.DeliveryOption.Shipping)),c="true"===vdata.model.hasFreeShipping.toLowerCase(),p=parseFloat(vdata.model.freeShippingAmount),p=isNaN(p)?0:p,T()}(),I(),D(),function(){const e=$("#reminderPopup");u&&e.append($('<h6 class="my-4">').append($('<span class="text-warning mr-1">').append($('<i class="fa-solid fa-circle-exclamation">')),m?vdata.localizer.cannotEdit_VoidedOrPaid:vdata.localizer.cannotEdit_PaymentProcessing))}(),function(){const e=$("#customer-info-form").addClass("customer-info my-4"),t=StaticData.CountryList.find((e=>e.Key===vdata.model.defaultCountryCode)),i=t&&t.Value.CountryCallingCode;!function(e){const a=$('<fieldset id="bill-to-fieldset">').appendTo($("#customer-info-form"));$("<h5>").addClass("mt-3").text(vdata.localizer.billTo).appendTo(a);const t=$('<div id="bill-person-given-name">').dxTextBox({value:vdata.model.billedPersonGivenName,disabled:u||v,maxLength:100,label:vdata.localizer.givenName,labelMode:"floating",inputAttr:{autocomplete:"given-name",name:"bill-person-given-name-input",id:"bill-person-given-name-input"},onValueChanged:function(e){const a=$("#delivery-contact-given-name");a.length&&a.dxTextBox("option","value",e.value)}}).dxValidator({validationGroup:o,validationRules:[{type:"required",message:vdata.localizer.invalidFeedback_GivenName}]}),i=$('<div id="bill-person-family-name">').dxTextBox({value:vdata.model.billedPersonFamilyName,disabled:u||v,maxLength:100,label:vdata.localizer.familyName,labelMode:"floating",inputAttr:{autocomplete:"family-name",name:"bill-person-family-name-input",id:"bill-person-family-name-input"},onValueChanged:function(e){const a=$("#delivery-contact-family-name");a.length&&a.dxTextBox("option","value",e.value)}}).dxValidator({validationGroup:o,validationRules:[{type:"required",message:vdata.localizer.invalidFeedback_FamilyName}]});$("<div>").addClass("d-flex mb-2").appendTo(a).append(t,i);const l=$('<div id="bill-contact-phone">').appendTo(a);corprio.coWidgets.useCoPhoneNumber(),l.coPhoneNumber({name:"contact-phone",value:vdata.model.billedPhoneSubscriberNumber?{NumberType:3,CountryCallingCode:vdata.model.billedPhoneCountryCallingCode,NationalDestinationCode:vdata.model.billedPhoneNationalDestinationCode,SubscriberNumber:vdata.model.billedPhoneSubscriberNumber}:{NumberType:3,CountryCallingCode:e},onValueChanged:function(e){if(u||v)return;const a=$("#delivery-phone-number").coPhoneNumber("instance");a&&a.option("value",e.value)},required:!0,validationGroup:o}),l.find(".phone").dxValidator({validationGroup:o,validationRules:[{type:"custom",reevaluate:!0,message:vdata.localizer.invalidFeedback_InvalidPhoneNumber,validationCallback:function(e){return null!=e.value&&""!=e.value&&null!=e.value}}]}),(u||v)&&(l.find("input").attr("disabled","disabled"),l.find(".co-phonenumber-country-flag").remove(),l.find('div[role="button"]').remove())}(i),function(e){const t=$('<fieldset id="delivery-method-fieldset">').appendTo($("#customer-info-form"));if(!b.length)return void t.append(`<div class="font-italic">${vdata.localizer.noDeliveryMethod.replaceAll("{0}",vdata.model.organizationShortName).replaceAll("{1}",vdata.model.organizationEmailAddress)}</div>`);if(d===a.DeliveryOption.NoOption)return;if(t.append($('<h5 class="mt-3">').text(vdata.localizer.deliveryMethod),$('<div id="delivery-method">').dxRadioGroup({dataSource:b,disabled:u||v,value:d,itemTemplate:function(e,t,i){if(e===a.DeliveryOption.SelfPickup)i.append($('<div class="font-weight-bold">').text(N(a.DeliveryOption.SelfPickup)),$('<div class="delivery-method-info my-2">').text(vdata.model.selfPickUpInstruction?vdata.model.selfPickUpInstruction:vdata.localizer.noPickupInstruction.replaceAll("{0}",vdata.model.organizationShortName).replaceAll("{1}",vdata.model.organizationEmailAddress)));else if(e===a.DeliveryOption.Shipping){const e=O($('<div id="shipping-choice">')),a=$("<div>").html(`${vdata.localizer.deliveryCharge}: ${StaticData.FormatCurrency(parseFloat(vdata.model.deliveryChargeAmount),vdata.model.currencyCode)}`),t=$('<div class="font-weight-bold">').html(vdata.localizer.freeShippingHint1.replaceAll("{0}",StaticData.FormatCurrency(p,vdata.model.currencyCode))),o=$('<div class="delivery-method-info my-2">').append(c?[a,t]:a);i.append(u?e:[e,o])}},onValueChanged:function(e){u||(d=e.value,$("#deliver-to-section").toggle(d===a.DeliveryOption.Shipping),$("#recipient-section").toggle(d===a.DeliveryOption.Shipping),T(),$("#delivery-charge-amt").text(StaticData.FormatCurrency(g,vdata.model.currencyCode)),$("#delivery-charge-div").toggle(d===a.DeliveryOption.Shipping),$("#order-total").text(StaticData.FormatCurrency(g+y,vdata.model.currencyCode)))}})),!s)return;function i(e){return d===a.DeliveryOption.SelfPickup||null!=e.value&&""!=e.value&&null!=e.value}const l=$('<div id="deliver-to-section">').appendTo(t);l.toggle(d===a.DeliveryOption.Shipping),l.append($("<h5>").addClass("mt-3").text(vdata.localizer.deliverTo),$('<div id="delivery-address-line1" class="mb-2">').dxTextBox({value:vdata.model.deliveryAddress_Line1,disabled:u||v,maxLength:250,label:corprio.globalization.getMessage("line1"),labelMode:"floating",inputAttr:{autocomplete:"address-line1",name:"delivery-address-line1-input",id:"delivery-address-line1-input"}}).dxValidator({validationGroup:o,validationRules:[{type:"custom",reevaluate:!0,message:vdata.localizer.invalidFeedback_AddressLine1,validationCallback:i}]}),$('<div id="delivery-address-line2" class="mb-2">').dxTextBox({value:vdata.model.deliveryAddress_Line2,disabled:u||v,maxLength:250,label:corprio.globalization.getMessage("line2"),labelMode:"floating",inputAttr:{autocomplete:"address-line2",name:"delivery-address-line2-input",id:"delivery-address-line2-input"}}),$('<div id="delivery-address-city" class="mb-2">').dxTextBox({value:vdata.model.deliveryAddress_City,disabled:u||v,maxLength:250,label:corprio.globalization.getMessage("City"),labelMode:"floating",inputAttr:{autocomplete:"address-level2",name:"delivery-address-city-input",id:"delivery-address-city-input"}}),$('<div id="delivery-address-state" class="mb-2">').dxTextBox({value:vdata.model.deliveryAddress_State,disabled:u||v,maxLength:250,label:corprio.globalization.getMessage("State"),labelMode:"floating",inputAttr:{autocomplete:"address-level1",name:"delivery-address-state-input",id:"delivery-address-state-input"}}),$('<div id="delivery-address-postal" class="mb-2">').dxTextBox({value:vdata.model.deliveryAddress_PostalCode,disabled:u||v,maxLength:20,label:corprio.globalization.getMessage("PostalCode"),labelMode:"floating",inputAttr:{autocomplete:"postal-code",name:"delivery-address-postal-input",id:"delivery-address-postal-input"}}),$('<div id="delivery-address-country-code" class="mb-2">').dxSelectBox({value:vdata.model.defaultCountryCode,disabled:u||v,dataSource:StaticData.CountryList,displayExpr:"Value.GlobalizedName",valueExpr:"Key",label:corprio.globalization.getMessage("Country"),labelMode:"floating",searchEnabled:!0,inputAttr:{autocomplete:"country-code",name:"delivery-address-country-code-input",id:"delivery-address-country-code-input"}}).dxValidator({validationGroup:o,validationRules:[{type:"custom",reevaluate:!0,message:vdata.localizer.invalidFeedback_CountryCode,validationCallback:i}]}));const n=$('<div id="recipient-section">').appendTo(t);n.toggle(d===a.DeliveryOption.Shipping),$("<h5>").addClass("mt-3").text(vdata.localizer.receipient).appendTo(n),$("<div>").addClass("d-flex").appendTo(n).append($('<div id="delivery-contact-given-name">').dxTextBox({value:u||v?vdata.model.deliveryContact_GivenName:String($("#bill-person-given-name").find("input").val()),disabled:u||v,maxLength:100,label:vdata.localizer.givenName,labelMode:"floating",inputAttr:{autocomplete:"given-name",name:"delivery-contact-given-name-input",id:"delivery-contact-given-name-input"}}).dxValidator({validationGroup:o,validationRules:[{type:"custom",reevaluate:!0,message:vdata.localizer.invalidFeedback_GivenName,validationCallback:i}]}),$('<div id="delivery-contact-family-name">').dxTextBox({value:u||v?vdata.model.deliveryContact_FamilyName:String($("#bill-person-family-name").find("input").val()),disabled:u||v,maxLength:100,label:vdata.localizer.familyName,labelMode:"floating",inputAttr:{autocomplete:"family-name",name:"delivery-contact-family-name-input",id:"delivery-contact-family-name-input"}}).dxValidator({validationGroup:o,validationRules:[{type:"custom",reevaluate:!0,message:vdata.localizer.invalidFeedback_FamilyName,validationCallback:i}]}));const r=$('<div id="delivery-phone-number">').appendTo(n);corprio.coWidgets.useCoPhoneNumber(),r.coPhoneNumber({name:"delivery-phone-number",value:vdata.model.deliveryPhoneSubscriberNumber?{NumberType:3,CountryCallingCode:vdata.model.deliveryPhoneCountryCallingCode,NationalDestinationCode:vdata.model.deliveryPhoneNationalDestinationCode,SubscriberNumber:vdata.model.deliveryPhoneSubscriberNumber}:{NumberType:3,CountryCallingCode:e},required:!1,validationGroup:o}),r.find(".phone").dxValidator({validationGroup:o,validationRules:[{type:"custom",reevaluate:!0,message:vdata.localizer.invalidFeedback_InvalidPhoneNumber,validationCallback:i}]}),(u||v)&&(r.find("input").attr("disabled","disabled"),r.find(".co-phonenumber-country-flag").remove(),r.find('div[role="button"]').remove())}(i),$('<div id="validation-summary-purchase">').appendTo(e).dxValidationSummary({validationGroup:o});const l=$("<div>").appendTo($("<div>").addClass("d-flex justify-content-center mt-2 mb-2").appendTo(e));u||l.append($('<button type="submit">').addClass("btn btn-primary m-2").html(`<i class="fas fa-check mr-1"></i>${vdata.localizer.proceedToPayment}`)),m||l.append($('<button type="button">').addClass("btn btn-danger m-2").html(`<i class="fas fa-times mr-1"></i>${vdata.localizer.cancelOrder}`).on("click",k));const n=$("#load-panel").dxLoadPanel({message:vdata.localizer.processing,visible:!1,showIndicator:!0,showPane:!0,shading:!0,hideOnOutsideClick:!1}).dxLoadPanel("instance");e.on("submit",(function(e){if(e.preventDefault(),u||v)return;let t=DevExpress.validationEngine.getGroupConfig(o);if(t&&!t.validate().isValid)return void $("#validation-summary-purchase")[0].scrollIntoView({behavior:"smooth"});const i=$("#bill-contact-phone").coPhoneNumber("instance"),l={BillPerson:{FamilyName:$("#bill-person-family-name").dxTextBox("option","value"),GivenName:$("#bill-person-given-name").dxTextBox("option","value")},BillContactPhone:i.option("value"),ChosenDeliveryMethod:d,SalesOrderID:vdata.model.salesOrderID};if(d===a.DeliveryOption.Shipping){l.DeliveryAddress={Line1:$("#delivery-address-line1").dxTextBox("option","value"),Line2:$("#delivery-address-line2").dxTextBox("option","value"),City:$("#delivery-address-city").dxTextBox("option","value"),PostalCode:$("#delivery-address-postal").dxTextBox("option","value"),State:$("#delivery-address-state").dxTextBox("option","value"),CountryAlphaCode:$("#delivery-address-country-code").dxSelectBox("option","value")},l.DeliveryContact={FamilyName:$("#delivery-contact-family-name").dxTextBox("option","value"),GivenName:$("#delivery-contact-given-name").dxTextBox("option","value")};const e=$("#delivery-phone-number").coPhoneNumber("instance");l.DeliveryContactPhone=e.option("value")}let r;n.show();try{r=JSON.stringify(l)}catch(e){console.log("Failed to stringify data."),r=""}$.ajax({url:vdata.actions.finalizeSalesOrder,type:"POST",contentType:"application/json;charset=utf-8",data:r,success:function(){window.location.replace(`${vdata.settings.paymentPortalUrl}/${vdata.model.organizationShortName}/RecePayment/order/${vdata.model.salesOrderID}?successUrl=${vdata.settings.appUrl}/${vdata.model.organizationID}/thankyou&failUrl=${vdata.settings.appUrl}/${vdata.model.organizationID}/paymentfailed`)},complete:function(){n.hide()},error:corprio.formatError})}))}(),P(),u||$(".add-prd-btn").on("click",z)}))})(),i})()));